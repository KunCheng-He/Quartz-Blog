# 0-å‡†å¤‡å·¥ä½œ

+ ğŸï¸**é©±åŠ¨ä¸‹è½½**
	+ è¿›å…¥ [Nvidiaå®˜ç½‘](https://www.nvidia.cn/Download/index.aspx?lang=cn) é€‰æ‹©è‡ªå·±å¯¹åº”çš„æ˜¾å¡å‹å·å’Œç³»ç»Ÿç›´æ¥ä¸‹è½½å³å¯
+ ğŸ–¼ï¸**å…³é—­å›¾å½¢ç•Œé¢**
	+ å¦‚æœå®‰è£…çš„æ˜¯æœåŠ¡å™¨ç‰ˆæœ¬çš„ç³»ç»Ÿï¼Œæ²¡æœ‰è£…æ¡Œé¢ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡è¿™ä¸€æ­¥ã€‚å…·ä½“çš„æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š

```shell
# æŸ¥çœ‹é»˜è®¤æ¨¡å¼
# è¾“å‡º multi-user.target è¯´æ˜é»˜è®¤å°±æ˜¯ç»ˆç«¯ç•Œé¢
systemctl get-default

# åœæ­¢å›¾å½¢åŒ–ç•Œé¢æœåŠ¡
service graphical.target stop

# ä¿®æ”¹å‘½ä»¤è¡Œæ¨¡å¼ä¸ºé»˜è®¤
systemctl set-default multi-user.target
```

+ ğŸ­**ç¦ç”¨nouveaué©±åŠ¨**
	+ è¿™æ˜¯å¼€æºé©±åŠ¨ï¼Œä¸æ˜¯å®˜æ–¹é©±åŠ¨ã€‚æœ‰çš„ç³»ç»Ÿä¼šå¼€æœºè‡ªå¯ï¼Œæ‰€ä»¥å°† `nouveau` åŠ å…¥é»‘åå•ï¼›æœ‰çš„ä¼šå°†å…¶å¯åŠ¨æå‰åˆ°ç³»ç»Ÿåˆå§‹åŒ–é˜¶æ®µï¼Œè¿™ä¸ªéœ€è¦ä¿®æ”¹ `grub` æ–‡ä»¶ï¼Œç„¶åé‡æ–°ç”Ÿæˆå¼•å¯¼æ–‡ä»¶ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

```shell
# åŠ å…¥é»‘åå•
# åœ¨ /etc/modprobe.d æ–‡ä»¶å¤¹ä¸­æ–°å»º nouveau-blacklist.conf æ–‡ä»¶
sudo vim /etc/modprobe.d/nouveau-blacklist.conf
# å†™å…¥ï¼š
blacklist nouveau 
options nouveau modeset=0

# ä¿®æ”¹å¼•å¯¼æ–‡ä»¶
# åœ¨ /etc/default/grub æ–‡ä»¶çš„ GRUB_CMDLINE_LINUX å‚æ•°ä¸­æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼š
sudo vim /etc/default/grub
# å„ä¸ªå‚æ•°ä¹‹é—´é€šè¿‡ç©ºæ ¼éš”å¼€å³å¯
rd.driver.blacklist=nouveau

# é‡æ–°ç”Ÿæˆå¼•å¯¼æ–‡ä»¶
grub2-mkconfig -o /boot/grub2/grub.cfg

# å®Œæˆä¸Šè¿°æ“ä½œåéœ€è¦é‡å¯
reboot

# é‡å¯ä¹‹åå¯ä»¥æ£€æµ‹ä¸€ä¸‹æ˜¯å¦çœŸçš„ç¦ç”¨äº†
# æ²¡æœ‰è¾“å‡ºå°±æ˜¯ç¦ç”¨æˆåŠŸäº†
lsmod | grep nouveau
```

# 1-é©±åŠ¨å®‰è£…

å®‰è£…é©±åŠ¨çš„è¿‡ç¨‹ï¼Œå°±æ˜¯å°†æºæ–‡ä»¶æ‹¿è¿‡æ¥ï¼Œé‡æ–°ç¼–è¯‘ä¸€ä¸‹ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€ä¸‹ç¼–è¯‘å·¥å…·

```shell
sudo dnf install binutils make gcc
```

è¿˜æœ‰ä¸€ä¸ªæ¡ä»¶ï¼Œ**kernel-headerså’Œkernel-develä¸¤ä¸ªåŒ…çš„ç‰ˆæœ¬è¦ä¸å†…æ ¸ç‰ˆæœ¬ä¸€è‡´**ï¼ŒæŸ¥çœ‹å‘½ä»¤å¦‚ä¸‹ï¼Œå“ªä¸€ä¸ªç‰ˆæœ¬ä¸å¯¹å°±é‡æ–°å®‰è£…å“ªä¸€ä¸ªåŒ…å³å¯

```shell
# æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬
uname -r

# æŸ¥çœ‹ kernel-headers å’Œ kernel-devel çš„ç‰ˆæœ¬
rpm -q kernel-headers kernel-devel
```

**ä¸Šè¿°é—®é¢˜è§£å†³å**ï¼Œæ‰¾åˆ°åˆšæ‰ä¸‹è½½çš„é©±åŠ¨æ–‡ä»¶ï¼Œåˆ‡æ¢ `root` ç”¨æˆ·å®‰è£…å³å¯

```shell
sudo su
sh NVIDIA-Linux-x86_64-xxx.xxx.xx.run

# å®‰è£…è¿‡ç¨‹ä¸€è·¯ yes å³å¯
# å¦‚æœå®‰è£…å®Œæˆéœ€è¦æ”¹å›é»˜è®¤å›¾å½¢ç•Œé¢ï¼Œåˆ™éœ€è¦æ‰§è¡Œï¼š
systemctl set-default graphical.target

# æŸ¥çœ‹æ˜¾å¡çŠ¶æ€
nvidia-smi
```
